<!DOCTYPE html>
<html>
	<head>
		<script>
			var canvas;
			var ctx;
			var isDown = false;
			var x = 10, y = 10;
			
			function init() {
			canvas = document.getElementById('canvas')
			ctx = canvas.getContext('2d');
			document.addEventListener("mousemove", showXY);
			document.addEventListener("mouseup", handleUp);
			document.addEventListener("mousedown", handleDown);
			document.addEventListener("mousemove", handleMoved);
			ctx.strokeRect(0,0,400,200);
			ctx.fillStyle = 'red';
			}
			
			function handleDown(event) {
			isDown = true;
			}
			function handleUp(event) {
			isDown = false;
			}
			function handleMoved(event) {
			if (!isDown) {
			ctx.strokeRect(0,0,400,200);
			ctx.fillStyle = 'blue';
			} else {
			ctx.strokeRect(0,0,400,200);
			ctx.fillStyle = 'red';}
			x = event.offsetX;
			y = event.offsetY;
			ctx.fillRect(x,y,20,20);
			}
			function showXY(event) {
			var x = event.offsetX;
			var y = event.offsetY;
			document.getElementById("x").value = "x=" + x;
			document.getElementById("y").value = "y=" + y;
			}
			
		</script>
	</head>
	
	<body onload="init();">
		<input type="text" id="x"></input>	
		<input type="text" id="y"></input>
		<br>
		<canvas id="canvas" width="400" height="200"></canvas>
	</body>
</html>